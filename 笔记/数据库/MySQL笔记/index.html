<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/Book_and_Quill_JE2_BE2.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Book_and_Quill_JE2_BE2.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Book_and_Quill_JE2_BE2.png">
  <link rel="mask-icon" href="/images/Book_and_Quill_JE2_BE2.png" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mpasser.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="MySQL简介 什么是数据库？ 数据库：Database，按照数据结构来组织、存储和管理数据的仓库，简单来说就是存储数据的仓库 数据库管理系统：用来管理数据库的软件系统，常见：MySQL、Oracle、SQLServer、DB2、Sybase、Access等   什么是MySQL？ MySQL：是一个开源的关系型数据库管理系统，由瑞典MySQL AB公司开发，后来被Oracle收购，所以目前属于O">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL笔记">
<meta property="og:url" content="http://mpasser.github.io/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="MPasser&#39;s blog">
<meta property="og:description" content="MySQL简介 什么是数据库？ 数据库：Database，按照数据结构来组织、存储和管理数据的仓库，简单来说就是存储数据的仓库 数据库管理系统：用来管理数据库的软件系统，常见：MySQL、Oracle、SQLServer、DB2、Sybase、Access等   什么是MySQL？ MySQL：是一个开源的关系型数据库管理系统，由瑞典MySQL AB公司开发，后来被Oracle收购，所以目前属于O">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-04-28T16:00:00.000Z">
<meta property="article:modified_time" content="2023-08-17T04:19:34.017Z">
<meta property="article:author" content="MPasser">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://mpasser.github.io/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E7%AC%94%E8%AE%B0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>MySQL笔记 | MPasser's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">MPasser's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mpasser.github.io/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="MPasser">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MPasser's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-29 00:00:00" itemprop="dateCreated datePublished" datetime="2020-04-29T00:00:00+08:00">2020-04-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-08-17 12:19:34" itemprop="dateModified" datetime="2023-08-17T12:19:34+08:00">2023-08-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Database/" itemprop="url" rel="index"><span itemprop="name">Database</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="MySQL简介"><a href="#MySQL简介" class="headerlink" title="MySQL简介"></a>MySQL简介</h2><ul>
<li>什么是数据库？<ul>
<li>数据库：Database，按照数据结构来组织、存储和管理数据的仓库，简单来说就是存储数据的仓库</li>
<li>数据库管理系统：用来管理数据库的软件系统，常见：MySQL、Oracle、SQLServer、DB2、Sybase、Access等</li>
</ul>
</li>
<li>什么是MySQL？<ul>
<li>MySQL：是一个开源的关系型数据库管理系统，由瑞典MySQL AB公司开发，后来被Oracle收购，所以目前属于Oracle公司</li>
<li>特点：体积小、速度快、成本低、开源，中小型网站都是用MySQL数据库</li>
<li>版本：企业版、社区版</li>
<li>DBA：Database Administrator 数据库管理员</li>
</ul>
</li>
</ul>
<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><h3 id="连接MySQL"><a href="#连接MySQL" class="headerlink" title="连接MySQL"></a>连接MySQL</h3><p>语法：</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u 用户名 -p密码 -h 数据库服务器地址 -D 数据库名</span><br></pre></td></tr></table></figure>

<p>安装MySQL之后，有一个默认管理员用户root，若安装时未设置，密码默认为空<br>未指定-h时，即连接本机的数据库。</p>
<h3 id="查看数据库和表"><a href="#查看数据库和表" class="headerlink" title="查看数据库和表"></a>查看数据库和表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases; <span class="comment">-- 查看当前所有数据库</span></span><br><span class="line">use 数据库名; <span class="comment">--切换数据库</span></span><br><span class="line"><span class="keyword">show</span> tables; <span class="comment">-- 查看当前数据库的所有表</span></span><br><span class="line"><span class="keyword">select</span> database(); <span class="comment">-- 显示当前操作的数据库</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>(); <span class="comment">-- 显示当前登录的用户</span></span><br></pre></td></tr></table></figure>

<p>mysql内置数据库</p>
<ul>
<li>mysql：系统内置数据库，包含MySQL相关的系统信息</li>
<li>information_schema：保存关于MySQL服务器所维护的所有其他数据库的信息。如数据库名，数据库的表，表栏的数据类型与访问权限等。</li>
<li>performance_schema：存储了健康监控相关表，记录了一些磁盘和内存等信息。</li>
</ul>
<h3 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h3><p>以.sql结尾的文件是数据库脚本文件。进入MySQL执行source命令执行脚本以导入数据。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source 数据库脚本文件路径</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_test <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> BONUS          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> DEPT           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> EMP            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SALGRADE       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> BONUS;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> ENAME <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">10</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JOB   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">9</span>)  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SAL   <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> COMM  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)     <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> DEPT;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> DEPTNO <span class="operator">|</span> <span class="type">int</span>(<span class="number">2</span>)      <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> DNAME  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">14</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> LOC    <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">13</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> EMP;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> EMPNO    <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ENAME    <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">10</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JOB      <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">9</span>)  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MGR      <span class="operator">|</span> <span class="type">int</span>(<span class="number">4</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> HIREDATE <span class="operator">|</span> <span class="type">date</span>        <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SAL      <span class="operator">|</span> <span class="keyword">double</span>      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> COMM     <span class="operator">|</span> <span class="type">int</span>(<span class="number">7</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> DEPTNO   <span class="operator">|</span> <span class="type">int</span>(<span class="number">2</span>)      <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> SALGRADE;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> GRADE <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> LOSAL <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> HISAL <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>

<h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><p>SQL： Structured Query Language ，结构化查询语言。用来对数据库进行查询、更新和管理的一种特殊的语言。</p>
<p>包含三个部分：</p>
<ul>
<li>DML：<ul>
<li>Data Manipulation Language ，数据操作语言</li>
<li>用于检索或更新数据库：insert delete update select ，增删改查</li>
</ul>
</li>
<li>DDL：<ul>
<li>Data Definition Language ，数据定义语言</li>
<li>用于定义数据的结构：create alter drop</li>
</ul>
</li>
<li>DCL：<ul>
<li>Data Control Language ，数据控制语言</li>
<li>用于定义数据库用户的权限</li>
</ul>
</li>
</ul>
<h2 id="查找操作"><a href="#查找操作" class="headerlink" title="查找操作"></a>查找操作</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 列名<span class="number">1</span> 别名，列名<span class="number">2</span> 别名<span class="number">2</span> ... <span class="keyword">from</span> 表名;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME <span class="keyword">from</span> EMP;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP;</span><br><span class="line"><span class="keyword">select</span> ENAME name,SAL &quot;your salary&quot; <span class="keyword">from</span> EMP; <span class="comment">-- 别名包含空格时，需要使用双引号</span></span><br></pre></td></tr></table></figure>

<h4 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h4><ul>
<li>字符串连接concat()</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> concat(<span class="string">&#x27;编号为&#x27;</span>,EMPNO,<span class="string">&#x27;的雇员，姓名为&#x27;</span>,ENAME,<span class="string">&#x27;职位为&#x27;</span>,JOB) <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">结果</span><br><span class="line">| 编号为7369的雇员，姓名为SMITH职位为CLERK            |</span><br><span class="line">| 编号为7499的雇员，姓名为ALLEN职位为SALESMAN         |</span><br><span class="line">| 编号为7521的雇员，姓名为WARD职位为SALESMAN          |</span><br><span class="line">| 编号为7566的雇员，姓名为JONES职位为MANAGER          |</span><br><span class="line">| 编号为7654的雇员，姓名为MARTIN职位为SALESMAN        |</span><br><span class="line">| 编号为7698的雇员，姓名为BLAKE职位为MANAGER          |</span><br></pre></td></tr></table></figure>

<ul>
<li>四则运算 + - * &#x2F;</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME 雇员姓名,SAL<span class="operator">*</span><span class="number">12</span> 年薪 <span class="keyword">from</span> EMP; <span class="comment">-- 没加奖金</span></span><br><span class="line"><span class="keyword">select</span> ENAME 雇员姓名,(SAL<span class="operator">+</span>COMM)<span class="operator">*</span><span class="number">12</span> 年薪 <span class="keyword">from</span> EMP;  <span class="comment">-- 加了奖金，但是有问题</span></span><br><span class="line"><span class="keyword">select</span> ENAME 雇员姓名,(SAL<span class="operator">+</span>ifnull(COMM,<span class="number">0</span>))<span class="operator">*</span><span class="number">12</span> 年薪 <span class="keyword">from</span> EMP; <span class="comment">-- 使用ifnull()来将null装换为0</span></span><br></pre></td></tr></table></figure>

<p>在MySQL中，NULL与任何值进行运算，结果都为NULL</p>
<ul>
<li>去除重复列 distinct</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> JOB <span class="keyword">from</span> EMP; <span class="comment">-- 存在重复的结果</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> JOB <span class="keyword">from</span> EMP; <span class="comment">-- 使用distinct去重</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> ENAME，JOB <span class="keyword">from</span> EMP; <span class="comment">-- 对多列查询使用distinct时，所有列都不同时才可去重</span></span><br></pre></td></tr></table></figure>

<h3 id="限定查询"><a href="#限定查询" class="headerlink" title="限定查询"></a>限定查询</h3><h4 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 列名<span class="number">1</span> 别名，列名<span class="number">2</span> 别名<span class="number">2</span> ... </span><br><span class="line"><span class="keyword">from</span> 表名 </span><br><span class="line"><span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<h4 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h4><ul>
<li>比较运算符</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">  &lt;   &gt;=   &lt;=   !=或&lt;&gt;</span></span><br></pre></td></tr></table></figure>

<p>例：查询工资大于1500的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL<span class="operator">&gt;</span><span class="number">1500</span>;</span><br></pre></td></tr></table></figure>

<p>例：查询雇员编号不是7369的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> ENO<span class="operator">!=</span><span class="number">7369</span></span><br></pre></td></tr></table></figure>

<p>例：查询姓名是Smith的雇员编号、姓名、工资、入职时间</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> EMPNO,ENAME,SAL,HIREDATE <span class="keyword">from</span> EMP <span class="keyword">where</span> ENAME<span class="operator">=</span><span class="string">&#x27;Smith&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>注：字符串要使用引号，date类型数据的值使用时也需要加引号</strong></p>
<p>不同版本默认列名和字符串数据大小写敏感可能不同。此设置可通过修改系统变量来变更，详情见<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_lower_case_table_names">官网文档</a>。</p>
<ul>
<li>null 或 not null</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> COMM <span class="keyword">is</span> <span class="keyword">null</span>; <span class="comment">-- 判断是否为null时使用的是is</span></span><br></pre></td></tr></table></figure>

<ul>
<li>and</li>
</ul>
<p>例：查询基本工资大于1000，并且可以获取奖金的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL<span class="operator">&gt;</span><span class="number">1000</span> <span class="keyword">and</span> COMM <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>or</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> JOB<span class="operator">=</span><span class="string">&#x27;salesman&#x27;</span> <span class="keyword">or</span> SAL<span class="operator">&gt;=</span><span class="number">2000</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>not</li>
</ul>
<p>例：查询从事非销售工作，并且工资不小于1500的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> JOB<span class="operator">!=</span><span class="string">&#x27;salesman&#x27;</span> <span class="keyword">and</span> SAL<span class="operator">&gt;=</span><span class="number">1500</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> <span class="keyword">not</span>(JOB<span class="operator">=</span><span class="string">&#x27;salesman&#x27;</span> <span class="keyword">or</span> SAL<span class="operator">&lt;</span><span class="number">1500</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>between and</li>
</ul>
<p>例：查询基本工资大于1500且小于3000的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL<span class="operator">&gt;</span><span class="number">1500</span> <span class="keyword">and</span> SAL<span class="operator">&lt;</span><span class="number">3000</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="keyword">between</span> <span class="number">1500</span> <span class="keyword">and</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<p><strong>between and 包含临界值；且小值在前，大值在后</strong></p>
<ul>
<li>in 或 not in</li>
</ul>
<p>例：查询编号为7369、7499、7788的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> EMPNO <span class="keyword">in</span> (<span class="number">7369</span>,<span class="number">7499</span>,<span class="number">7788</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>like</li>
</ul>
<p>用来进行模糊查询，需要结合通配符一起使用</p>
<p>常用通配符：<br>% 可以匹配任意长度字符，包含0个字符<br>_ 只能匹配单个字符</p>
<p>例：查询雇员姓名中包含M的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> ENAME <span class="keyword">like</span> <span class="string">&#x27;%M%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><h4 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 列名<span class="number">1</span> 别名，列名<span class="number">2</span> 别名<span class="number">2</span> ... </span><br><span class="line"><span class="keyword">from</span> 表名 </span><br><span class="line"><span class="keyword">where</span> 条件</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 排序列<span class="number">1</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>,排序列<span class="number">2</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span> ...;</span><br></pre></td></tr></table></figure>

<p><strong>asc表示升序，desc表示降序，省略则默认升序</strong></p>
<h4 id="用法-2"><a href="#用法-2" class="headerlink" title="用法"></a>用法</h4><p>例：查询所有雇员信息，按工资由低到高排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">order</span> <span class="keyword">by</span> SAL;</span><br></pre></td></tr></table></figure>

<p>例：查询雇员信息，按工资降序排序，若工资相同，则按入职时间由早到晚排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> SAL <span class="keyword">desc</span>,HIREDATE;</span><br></pre></td></tr></table></figure>

<p>例：查询雇员年薪并按年薪降序排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME 雇员姓名,(SAL<span class="operator">+</span>ifnull(COMM,<span class="number">0</span>))<span class="operator">*</span><span class="number">12</span> 年薪 <span class="keyword">from</span> EMP</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 年薪;</span><br></pre></td></tr></table></figure>

<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><p>同时从多张表中查询数据，一般来说多张表之间都会存在某种关系。</p>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><h4 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 列名<span class="number">1</span> 别名，列名<span class="number">2</span> 别名<span class="number">2</span> ... </span><br><span class="line"><span class="keyword">from</span> 表名<span class="number">1</span> 别名<span class="number">1</span>,表名<span class="number">2</span> 别名<span class="number">2</span> ...</span><br><span class="line"><span class="keyword">where</span> 条件</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 排序列<span class="number">1</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>,排序列<span class="number">2</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span> ...;</span><br></pre></td></tr></table></figure>

<p>例：将EMP表和DEPT表进行多表查询（笛卡尔积）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP,DEPT;</span><br></pre></td></tr></table></figure>

<p>通过将两张表的关联字段进行比较，去掉笛卡尔积，多表查询一般都会存在某种关系。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP,DEPT </span><br><span class="line"><span class="keyword">where</span> EMP.DEPTNO<span class="operator">=</span>DEPT.DEPTNO;</span><br></pre></td></tr></table></figure>

<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>例：查询雇员编号、雇员姓名、工资、所在部门编号、名称及位置</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> EMPNO,ENAME,SAL,E.DEPTNO,DNAME,LOC</span><br><span class="line"><span class="keyword">from</span> EMP E,DEPT D </span><br><span class="line"><span class="keyword">where</span> E.DEPTNO<span class="operator">=</span>D.DEPTNO; <span class="comment">-- 如果多张表中出现同名的列，当查询时需要指定前缀</span></span><br></pre></td></tr></table></figure>

<p>例：查询雇员姓名、雇员工资、雇员的领导姓名、领导工资（自身连接）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.ENAME,E.SAL,M.ENAME,M.SAL <span class="keyword">from</span> EMP E,EMP M</span><br><span class="line"><span class="keyword">where</span> E.MGR<span class="operator">=</span>M.EMPNO;</span><br></pre></td></tr></table></figure>

<p>例：查询雇员姓名、雇员工资、部门名称、工资所在等级（非等值连接）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.ENAME 雇员姓名,E.SAL 雇员工资,D.DNAME 部门名称,S.GRADE 工资所在等级 <span class="keyword">from</span> </span><br><span class="line">EMP E,DEPT D,SALGRADE S </span><br><span class="line"><span class="keyword">where</span> E.DEPTNO<span class="operator">=</span>D.DEPTNO <span class="keyword">and</span> E.SAL <span class="keyword">between</span> S.LOSAL <span class="keyword">and</span> S.HISAL;</span><br></pre></td></tr></table></figure>

<p>例：查询雇员姓名、雇员工资、部门名称、雇员工资等级、领导姓名、领导工资、领导工资等级</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.ENAME 雇员姓名,E.SAL 雇员工资,D.DNAME 部门名称,</span><br><span class="line">    ES.GRADE 雇员工资等级,M.ENAME 领导姓名,M.SAL 领导工资,MS.GRADE 领导工资等级 </span><br><span class="line"><span class="keyword">from</span> EMP E,EMP M,DEPT D,SALGRADE ES,SALGRADE MS </span><br><span class="line"><span class="keyword">where</span> E.DEPTNO<span class="operator">=</span>D.DEPTNO <span class="keyword">and</span> </span><br><span class="line">    E.MGR<span class="operator">=</span>M.EMPNO <span class="keyword">and</span> </span><br><span class="line">    E.SAL <span class="keyword">between</span> ES.LOSAL <span class="keyword">and</span> ES.HISAL <span class="keyword">and</span> </span><br><span class="line">    M.SAL <span class="keyword">between</span> MS.LOSAL <span class="keyword">and</span> MS.HISAL;</span><br></pre></td></tr></table></figure>

<h3 id="SQL99标准"><a href="#SQL99标准" class="headerlink" title="SQL99标准"></a>SQL99标准</h3><p>SQL99标准，也称为SQL1999标准，是1999年制定的<br>分类：内连接、外连接</p>
<h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><p>使用inner join…on</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 列名<span class="number">1</span> 别名，列名<span class="number">2</span> 别名<span class="number">2</span> ... </span><br><span class="line"><span class="keyword">from</span> 表名<span class="number">1</span> 别名<span class="number">1</span> <span class="keyword">inner</span> <span class="keyword">join</span> 表名<span class="number">2</span> 别名<span class="number">2</span> <span class="keyword">on</span> 多表间的关联关系</span><br><span class="line"><span class="keyword">where</span> 条件</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 排序列<span class="number">1</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>,排序列<span class="number">2</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span> ...;</span><br></pre></td></tr></table></figure>

<p>例：查询雇员编号、雇员姓名、工资、所在部门名称、</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.EMPNO,E.ENAME,E.SAL,D.DNAME </span><br><span class="line"><span class="keyword">from</span> EMP E <span class="keyword">inner</span> <span class="keyword">join</span> DEPT D <span class="keyword">on</span> E.DEPTNO<span class="operator">=</span>D.DEPTNO; </span><br></pre></td></tr></table></figure>

<p>例：查询工资大于1500的雇员姓名、雇员工资、部门名称、雇员的领导姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.ENAME,E.SAL,D.DNAME,M.ENAME <span class="keyword">from</span> </span><br><span class="line">EMP E <span class="keyword">inner</span> <span class="keyword">join</span> DEPT D <span class="keyword">on</span> E.DEPTNO<span class="operator">=</span>D.DEPTNO </span><br><span class="line">    <span class="keyword">inner</span> <span class="keyword">join</span> EMP M <span class="keyword">on</span> E.MGR<span class="operator">=</span>M.EMPNO </span><br><span class="line"><span class="keyword">where</span> E.SAL<span class="operator">&gt;</span><span class="number">1500</span>;</span><br></pre></td></tr></table></figure>

<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><p>分类：</p>
<ul>
<li>左外连接 left outer join … on ，也称为左连接left join … on<br>以左边的表为主表，无论如何都会显示主表中的所有数据</li>
<li>右外连接 right outer join … on， 也称为右连接 right join … on<br>以右边的表为主表，无论如何都会显示主表中的所有数据</li>
</ul>
<p>二者可以相互转换</p>
<p>例：查询雇员编号、工资、该雇员的领导姓名、领导工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.ENAME,E.SAL,M.ENAME,M.SAL </span><br><span class="line"><span class="keyword">from</span> EMP E,EMP M</span><br><span class="line"><span class="keyword">where</span> E.MGR<span class="operator">=</span>M.EMPNO; <span class="comment">-- 查询出的信息不完整，有的员工信息中MGR列值为空</span></span><br></pre></td></tr></table></figure>

<p>应当使用外连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.ENAME,E.SAL,M.ENAME,M.SAL </span><br><span class="line"><span class="keyword">from</span> EMP E <span class="keyword">left</span> <span class="keyword">join</span> EMP M <span class="keyword">on</span> E.MGR<span class="operator">=</span>M.EMPNO;</span><br></pre></td></tr></table></figure>

<h2 id="聚合函数和分组统计"><a href="#聚合函数和分组统计" class="headerlink" title="聚合函数和分组统计"></a>聚合函数和分组统计</h2><h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p>聚合函数，也称为统计函数</p>
<p>常用统计函数：</p>
<ul>
<li>count() 总数量</li>
<li>max() 最大值</li>
<li>min() 最小值</li>
<li>sum() 和</li>
<li>avg() 平均值</li>
</ul>
<p>例：查询部门30的总人数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(EMPNO) EMPCNT <span class="keyword">from</span> EMP <span class="keyword">where</span> DEPTNO<span class="operator">=</span><span class="number">30</span>;</span><br></pre></td></tr></table></figure>

<p><strong>会统计重复值，会忽略NULL值</strong></p>
<p>例：查询部门30的最高工资、最低工资、平均工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(SAL),<span class="built_in">min</span>(SAL),round(<span class="built_in">avg</span>(SAL),<span class="number">2</span>) </span><br><span class="line"><span class="keyword">from</span> EMP </span><br><span class="line"><span class="keyword">where</span> DEPTNO<span class="operator">=</span><span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ENAME,<span class="built_in">count</span>(EMPNO) EMPCNT <span class="keyword">from</span> EMP; <span class="comment">-- 无实际意义也不合理，Oracle数据库会报错</span></span><br></pre></td></tr></table></figure>

<h3 id="分组统计"><a href="#分组统计" class="headerlink" title="分组统计"></a>分组统计</h3><h4 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 列名<span class="number">1</span> 别名，列名<span class="number">2</span> 别名<span class="number">2</span> ... </span><br><span class="line"><span class="keyword">from</span> 表名<span class="number">1</span> 别名<span class="number">1</span>,表名<span class="number">2</span> 别名<span class="number">2</span> ...</span><br><span class="line"><span class="keyword">where</span> 条件 </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> 分组列 </span><br><span class="line"><span class="keyword">having</span> 分组后的条件 </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 排序列<span class="number">1</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>,排序列<span class="number">2</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span> ...;</span><br></pre></td></tr></table></figure>

<h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><p>例：查询每个部门的平均工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> DEPTNO,<span class="built_in">avg</span>(SAL) <span class="keyword">from</span> EMP </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> DEPTNO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> D.DNAME,<span class="built_in">avg</span>(E.SAL) </span><br><span class="line"><span class="keyword">from</span> EMP E,DEPT D </span><br><span class="line"><span class="keyword">where</span> E.DEPTNO<span class="operator">=</span>D.DEPTNO </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> D.DEPTNO;</span><br><span class="line"><span class="comment">-- 在MySQL中分组统计时可以查询出分组列以外的其他列，而在Oracle中不行</span></span><br><span class="line"><span class="comment">-- 建议将要查询出的列使用分组列</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> D.DNAME,<span class="built_in">avg</span>(E.SAL) </span><br><span class="line"><span class="keyword">from</span> EMP E,DEPT D </span><br><span class="line"><span class="keyword">where</span> E.DEPTNO<span class="operator">=</span>D.DEPTNO </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> D.DNAME;</span><br></pre></td></tr></table></figure>

<p>例：查询平均工资大于2000的部门的编号和平均工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> DEPTNO,<span class="built_in">avg</span>(SAL) avg</span><br><span class="line"><span class="keyword">from</span> EMP </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> DEPTNO </span><br><span class="line"><span class="keyword">having</span> avg<span class="operator">&gt;</span><span class="number">2000</span>; </span><br></pre></td></tr></table></figure>

<p><strong>分组后的条件在group by之后使用having</strong></p>
<p>例：查询部门平均工资的最大值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(<span class="built_in">avg</span>(SAL)) <span class="keyword">from</span> EMP <span class="keyword">group</span> <span class="keyword">by</span> DEPTNO;</span><br></pre></td></tr></table></figure>

<p><strong>至少在MySQL中聚合函数不能嵌套使用，需要使用子查询来实现</strong></p>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>一个查询中嵌套着另一个查询，称为子查询</p>
<ul>
<li>子查询必须放在小括号中</li>
<li>子查询可以出现早任意位置，如select、from、where、having等</li>
</ul>
<h3 id="基本用法-1"><a href="#基本用法-1" class="headerlink" title="基本用法"></a>基本用法</h3><h4 id="语法-5"><a href="#语法-5" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> (子查询) </span><br><span class="line"><span class="keyword">from</span> (子查询) </span><br><span class="line"><span class="keyword">where</span> (子查询) </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> </span><br><span class="line"><span class="keyword">having</span> (子查询)</span><br></pre></td></tr></table></figure>

<h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h4><p>例：查询工资比7566高的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP </span><br><span class="line"><span class="keyword">where</span> SAL<span class="operator">&gt;</span>(</span><br><span class="line">    <span class="keyword">select</span> SAL <span class="keyword">from</span> EMP <span class="keyword">where</span> EMPNO<span class="operator">=</span><span class="number">7566</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>将自查询与比较运算符一起使用时，必须保证子查询返回的结果不能多余一个</strong></p>
<p>例：查询雇员的编号、姓名、部门名称</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用多表连接</span></span><br><span class="line"><span class="keyword">select</span> E.EMPNO,E.ENAME,D.DNAME </span><br><span class="line"><span class="keyword">from</span> EMP E,DEPT D </span><br><span class="line"><span class="keyword">where</span> E.DEPTNO<span class="operator">=</span>D.DEPTNO;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用子查询</span></span><br><span class="line"><span class="keyword">select</span> EMPNO,ENAME,(</span><br><span class="line">    <span class="keyword">select</span> DNAME <span class="keyword">from</span> DEPT <span class="keyword">where</span> DEPTNO<span class="operator">=</span>E.DEPTNO</span><br><span class="line">) </span><br><span class="line"><span class="keyword">from</span> EMP E;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ul>
<li>一般来说，多表连接查询都可以使用子查询替换</li>
<li>子查询特点：灵活、方便，一般常作为增、删、改、查操作的条件，适合于操作一个表的数据</li>
<li>多表连接查询更适合于查看多表中数据</li>
</ul>
<h3 id="子查询分类"><a href="#子查询分类" class="headerlink" title="子查询分类"></a>子查询分类</h3><ul>
<li>单列子查询：返回单行单列，使用频率最高</li>
<li>多行子查询：返回多行单列</li>
<li>多列子查询：返回单行多列或多行多列，使用频率最低</li>
</ul>
<h4 id="单列子查询"><a href="#单列子查询" class="headerlink" title="单列子查询"></a>单列子查询</h4><p>例：查询工资高于平均工资的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP </span><br><span class="line"><span class="keyword">where</span> sal<span class="operator">&gt;</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="built_in">avg</span>(SAL) <span class="keyword">from</span> EMP</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>例：查询部门名称、部门员工数、部门平均工资、部门工资最低雇员姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> (<span class="keyword">select</span> DNAME <span class="keyword">from</span> DEPT <span class="keyword">where</span> DEPTNO<span class="operator">=</span>E.DEPTNO) DNAME,</span><br><span class="line">    <span class="built_in">count</span>(E.EMPNO) </span><br><span class="line"><span class="keyword">from</span> EMP E ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ED.DNAME,<span class="built_in">count</span>(ED.EMPNO) EMPCNT,round(<span class="built_in">avg</span>(SAL),<span class="number">2</span>) AVGSAL,</span><br><span class="line">    (<span class="keyword">select</span> EMP.ENAME <span class="keyword">from</span> EMP <span class="keyword">where</span> EMP.SAL<span class="operator">&gt;</span><span class="built_in">min</span>(ED.SAL)) MINSALEMP</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    <span class="keyword">select</span> E.EMPNO,E.SAL,D.DNAME </span><br><span class="line">    <span class="keyword">from</span> EMP E <span class="keyword">right</span> <span class="keyword">join</span> DEPT D </span><br><span class="line">    <span class="keyword">on</span> E.DEPTNO<span class="operator">=</span>D.DEPTNO</span><br><span class="line">)ED</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ED.DNAME; <span class="comment">-- 当有多人拿最低工资时，子查询需要做进一步处理</span></span><br></pre></td></tr></table></figure>

<h4 id="多行子查询"><a href="#多行子查询" class="headerlink" title="多行子查询"></a>多行子查询</h4><p>多行子查询，即返回了一个数组，将子查询返回值当做正常数组处理即可</p>
<p>对于多行子查询，可以使用如下三种操作符：</p>
<ul>
<li>in</li>
</ul>
<p>例：查询部门编号大于等于20的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP </span><br><span class="line"><span class="keyword">where</span> DEPTNO<span class="operator">&gt;=</span><span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP E  </span><br><span class="line"><span class="keyword">where</span> E.DEPTNO <span class="keyword">in</span>(</span><br><span class="line">       <span class="keyword">select</span> DEPTNO <span class="keyword">from</span> DEPT D </span><br><span class="line">    <span class="keyword">where</span> D.DEPTNO<span class="operator">&gt;=</span><span class="number">20</span> </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>any</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">=any：与任意一个相同，此时与in操作符相同</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">any：只要比里面最小的值大即可</span></span><br><span class="line">&lt;any：只要比里面最大的值小即可</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP E </span><br><span class="line"><span class="keyword">where</span> E.DEPTNO<span class="operator">=</span><span class="keyword">any</span>(</span><br><span class="line">    <span class="keyword">select</span> DEPTNO <span class="keyword">from</span> DEPT D</span><br><span class="line">    <span class="keyword">where</span> D.DEPTNO<span class="operator">&gt;=</span><span class="number">20</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>all</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">all：大于返回数组中最大值</span></span><br><span class="line">&lt;all：小于返回数组中最小值</span><br></pre></td></tr></table></figure>

<h4 id="多列子查询"><a href="#多列子查询" class="headerlink" title="多列子查询"></a>多列子查询</h4><p>多列子查询一般出现在from子句中，作为查询结果集</p>
<p>例：在所有从事销售工作的雇员中找出大于1500的员工</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> JOB<span class="operator">=</span><span class="string">&#x27;SALESMAN&#x27;</span>) ES </span><br><span class="line"><span class="keyword">where</span> ES.SAL<span class="operator">&gt;</span><span class="number">1500</span>;</span><br></pre></td></tr></table></figure>

<h2 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h2><h3 id="limit关键字"><a href="#limit关键字" class="headerlink" title="limit关键字"></a>limit关键字</h3><p>用来限制查询返回的记录数</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 列名<span class="number">1</span> 别名，列名<span class="number">2</span> 别名<span class="number">2</span> ... </span><br><span class="line"><span class="keyword">from</span> 表名<span class="number">1</span> 别名<span class="number">1</span>,表名<span class="number">2</span> 别名<span class="number">2</span> ...</span><br><span class="line"><span class="keyword">where</span> 条件 </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> 分组列 </span><br><span class="line"><span class="keyword">having</span> 分组后的条件 </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 排序列<span class="number">1</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>,排序列<span class="number">2</span> <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span> ...</span><br><span class="line">limit [参数<span class="number">1</span>],参数<span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>可以接收一个或两个参数：</p>
<ul>
<li>参数1用来指定起始行的索引，索引从0开始计数</li>
<li>参数2用来指定返回的记录数量</li>
</ul>
<p>例：查询工资前三名的雇员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">order</span> <span class="keyword">by</span> SAL <span class="keyword">desc</span> </span><br><span class="line">limit <span class="number">0</span>,<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">order</span> <span class="keyword">by</span> SAL <span class="keyword">desc</span> </span><br><span class="line">limit <span class="number">3</span>; <span class="comment">--若只有一个参数，则指的是参数2</span></span><br></pre></td></tr></table></figure>

<p>例：查询工资大于1000的第4-8的雇员</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL<span class="operator">&gt;</span><span class="number">1000</span></span><br><span class="line">limit <span class="number">3</span>,<span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<h3 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h3><p>例：每页显示pageSize，显示第pageIndex页的内容</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP </span><br><span class="line">limit (pageIndex<span class="number">-1</span>)<span class="operator">*</span>pageSize,pageSize <span class="comment">-- 计算方式</span></span><br></pre></td></tr></table></figure>

<p><strong>在MySQL中limit后参数不能包含任何运算</strong></p>
<h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><ul>
<li>concat(s1,s2,s3, …) 拼接字符串</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> concat(<span class="string">&#x27;aa&#x27;</span>,<span class="string">&#x27;bb&#x27;</span>,<span class="string">&#x27;cc&#x27;</span>) <span class="keyword">from</span> DUAL;</span><br><span class="line"><span class="keyword">select</span> concat(<span class="string">&#x27;编号为&#x27;</span>,EMPNO,<span class="string">&#x27;的员工，姓名为&#x27;</span>,ENAME) <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<p><strong>dual表是MySQL提供的一张虚拟表，主要为满足select from语法习惯，一般测试时使用</strong></p>
<ul>
<li>lower(s) 将字符串变为小写</li>
<li>upper(s) 将字符串变为大写</li>
<li>length(s) 获取字符串的长度</li>
<li>reverse(s) 将字符串反转</li>
<li>trim(s) 去除字符串两边的空格 select trim(‘       helllo  ‘) from dual;<ul>
<li>还有ltrim(s) , rtrim(s) ，分别用来去除字符串左边，右边的空格</li>
</ul>
</li>
<li>replace(s,s1,s2)  -  将字符串s中的s1替换为s2</li>
<li>repeat(s,n) 将字符串s重复n次</li>
<li>lpad(s,len,s1) 在字符串s的左边使用s1进行填充，直至长度为len</li>
<li>rpad(s,len,s1) 在字符串s的右边使用s1进行填充，直至长度为len</li>
<li>substr(s,i,n) 截取字符串，从第i个字符开始，截取n个字符<ul>
<li>left(s,n) 从左开始截取字符串，截取n个字符串</li>
<li>right(s,n) 从右开始截取字符串，截取n个字符串</li>
</ul>
</li>
</ul>
<h3 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h3><ul>
<li>ceil(n) 向上取整，返回大于n的最小整数</li>
<li>floor(n) 向下取整，返回小于n的最大整数</li>
<li>round(n,x) 四舍五入，将n保留x位小数</li>
<li>truncate(n,x) 向下取整，将n保留x位小数</li>
<li>rand() 返回一个在(0,1)范围内的随机数</li>
</ul>
<h3 id="日期和时间函数"><a href="#日期和时间函数" class="headerlink" title="日期和时间函数"></a>日期和时间函数</h3><ul>
<li>now() 返回当前日期时间，返回值类型与上下文有关</li>
<li>currentdate() 返回当前日期</li>
<li>currenttime() 返回当前时间</li>
<li>year(date)，month(date), day(date) 返回日期中的年，月，日</li>
<li>timestampdiff(interval,datetime1,datetime2) 返回两个日期时间之间相隔的整数，单位由interval定义 当datetime2&gt;datetime1（datetime2比datetime1晚）时，返回值为正</li>
<li>date_format(datetime,pattern) 以pattern格式化日期datetime</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> date_format(now(),<span class="string">&#x27;%Y年%m月%d日 %H:%i:%s&#x27;</span>) <span class="keyword">from</span> dual;</span><br><span class="line"><span class="operator">%</span>Y表示四位数字的年</span><br><span class="line"><span class="operator">%</span>m表示两位数字的月</span><br><span class="line"><span class="operator">%</span>d表示两位数字的日</span><br><span class="line"><span class="operator">%</span>H表示两位数字的小时，<span class="number">24</span>小时制</span><br><span class="line"><span class="operator">%</span>i表示两位数字的分钟</span><br><span class="line"><span class="operator">%</span>s表示两位数字的秒数</span><br></pre></td></tr></table></figure>

<h3 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h3><ul>
<li>if(f,v1,v2) 如果f为帧，则返回v1，否则返回v2</li>
<li>ifnull(v1,v2) 如果v1不为null，则返回v1，否则返回v2</li>
<li>case函数</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> </span><br><span class="line"><span class="keyword">when</span> f1 <span class="keyword">then</span> v1 </span><br><span class="line"><span class="keyword">when</span> f2 <span class="keyword">then</span> v2 </span><br><span class="line">... </span><br><span class="line"><span class="keyword">else</span> v </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- 分支流程控制</span></span><br></pre></td></tr></table></figure>

<h3 id="系统信息函数"><a href="#系统信息函数" class="headerlink" title="系统信息函数"></a>系统信息函数</h3><ul>
<li>database() 返回当前操作的数据库</li>
<li>user() 返回当前登录的用户</li>
<li>version() 返回当前数据库的版本</li>
</ul>
<h2 id="更新操作"><a href="#更新操作" class="headerlink" title="更新操作"></a>更新操作</h2><h3 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(列名<span class="number">1</span>,列名<span class="number">2</span>, ...) <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>, ...);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 一次性插入多条数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(列名<span class="number">1</span>,列名<span class="number">2</span>, ...) <span class="keyword">values</span></span><br><span class="line">(值<span class="number">1</span>,值<span class="number">2</span>, ...)，</span><br><span class="line">(值<span class="number">1</span>,值<span class="number">2</span>, ...),</span><br><span class="line">(值<span class="number">1</span>,值<span class="number">2</span>, ...),</span><br><span class="line">... </span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> DEPT(DEPTNO,LOC) </span><br><span class="line"><span class="keyword">values</span>(<span class="number">50</span>,<span class="string">&#x27;NanJing&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> DEPT </span><br><span class="line"><span class="keyword">values</span>(<span class="number">60</span>,<span class="string">&#x27;CLEANNING&#x27;</span>,<span class="string">&#x27;BEIJING&#x27;</span>)</span><br><span class="line"><span class="comment">-- 如果是一次插入表中所有的列，此时可以省略列名</span></span><br></pre></td></tr></table></figure>

<h3 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<p>示例：删除SALES部门所有工资大于5000的员工</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> EMP E </span><br><span class="line"><span class="keyword">where</span> E.DEPTNO<span class="operator">=</span>(</span><br><span class="line">    <span class="keyword">select</span> DEPTNO </span><br><span class="line">    <span class="keyword">from</span> DEPT </span><br><span class="line">    <span class="keyword">where</span> DNAME<span class="operator">=</span><span class="string">&#x27;SALES&#x27;</span></span><br><span class="line">) <span class="keyword">and</span> </span><br><span class="line">E.SAL<span class="operator">&gt;</span><span class="number">5000</span>;</span><br><span class="line"><span class="comment">-- 此处只能用子查询，没法用多表连接</span></span><br></pre></td></tr></table></figure>

<p><strong>delete from 表名 会将表中所有数据都删除</strong></p>
<h3 id="update"><a href="#update" class="headerlink" title="update"></a>update</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> </span><br><span class="line">列名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>,</span><br><span class="line">列名<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>, </span><br><span class="line">... </span><br><span class="line"><span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<h2 id="表和库的管理"><a href="#表和库的管理" class="headerlink" title="表和库的管理"></a>表和库的管理</h2><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p><strong>虽然SQL有数据类型的区分，但SQL仍然为弱类型语言</strong></p>
<ul>
<li>整数：smallint、int、bigint</li>
<li>小数：float、double</li>
<li>日期时间：date、time、datetime、timestamp</li>
<li>字符串：varchar、char、text<ul>
<li>char分配固定存储空间，varchar会根据实际存储内容占用存储空间</li>
<li>varchar省空间但会损失查询效率</li>
</ul>
</li>
<li>其他：<ul>
<li>clob 存储大的文本数据</li>
<li>blob 存储大的二进制数据</li>
</ul>
</li>
</ul>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">    列名 数据类型 特征,</span><br><span class="line">    列名 数据类型,</span><br><span class="line">    列名 数据类型,</span><br><span class="line">    ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key <span class="comment">-- 将id作为主键，</span></span><br><span class="line">        auto_increment, <span class="comment">-- 自动增长，默认由1开始</span></span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>, <span class="comment">-- 不允许为空</span></span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    sex <span class="type">varchar</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;female&#x27;</span> <span class="comment">-- 指定默认值</span></span><br><span class="line">)charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>

<p>若使用全列插入，自动增长列可写NULL值，达到不影响自动增长功能的目的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student </span><br><span class="line"><span class="keyword">values</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;adam&#x27;</span>,<span class="number">11</span>,<span class="string">&#x27;male&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>自动增长总是从该列最大值开始增长，不考虑前面数据的空缺</p>
<h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3><ul>
<li>添加列</li>
</ul>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> 列名 数据类型;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改列类型（也可以修改unique列属性）</li>
</ul>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify 列名 数据类型;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改列名</li>
</ul>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 change 原列名 新列名 数据类型;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除列</li>
</ul>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> 列名;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改表名</li>
</ul>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 rename 新表名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 或者</span></span><br><span class="line"></span><br><span class="line">rename <span class="keyword">table</span> 原表名 <span class="keyword">to</span> 新表名;</span><br></pre></td></tr></table></figure>

<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> 表名;</span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> 表名; <span class="comment">-- 有此表，则删除；若没有，不执行任何操作</span></span><br></pre></td></tr></table></figure>

<h3 id="截断表"><a href="#截断表" class="headerlink" title="截断表"></a>截断表</h3><p>清空表中的数据，作用类似于没有条件的delete</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure>

<p>delete与truncate区别：</p>
<ul>
<li>delete会记录日志，所以效率低；而truncate不记录日志，清空表并释放资源，速度快</li>
<li>delete不会将自动增长列归零，而truncate会</li>
<li>delete可以指定条件仅删除部分数据，truncate只能用来清空所有数据</li>
</ul>
<h3 id="创建库"><a href="#创建库" class="headerlink" title="创建库"></a>创建库</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database 数据库名 charset utf8;</span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> 数据库名 charset utf8;</span><br><span class="line"><span class="comment">-- 无此库则创建；有此库则不执行操作</span></span><br></pre></td></tr></table></figure>

<h3 id="删除库"><a href="#删除库" class="headerlink" title="删除库"></a>删除库</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> database 数据库名;</span><br><span class="line"><span class="keyword">drop</span> database if <span class="keyword">exists</span> 数据库名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 有此库则删除；无此库则不执行操作</span></span><br></pre></td></tr></table></figure>

<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p>constraint约束是对表中数据的一种限制，保证数据的完整性和有效性</p>
<h3 id="约束分类"><a href="#约束分类" class="headerlink" title="约束分类"></a>约束分类</h3><p>有五种约束：</p>
<ul>
<li>主键约束 primary key。用来唯一标识一条记录，不能为空</li>
<li>唯一约束 unique。不允许出现重复的值</li>
<li>检查约束 check。判断数据是否符合指定条件。<strong>MySQL会对check约束进行解析，但会忽略check约束，不会强制执行，可以通过SQL编程来解决。其他数据库基本上都是写完check都会生效。</strong></li>
<li>非空约束 not null。不允许为null，但可以为空字符串’’</li>
<li>外键约束 foreign key。约束两表之间的关联关系</li>
</ul>
<h3 id="添加约束"><a href="#添加约束" class="headerlink" title="添加约束"></a>添加约束</h3><h4 id="方式1：在创建表时添加约束"><a href="#方式1：在创建表时添加约束" class="headerlink" title="方式1：在创建表时添加约束"></a>方式1：在创建表时添加约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student (</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key, <span class="comment">-- 主键约束</span></span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>, <span class="comment">-- 非空约束</span></span><br><span class="line">    age <span class="type">int</span> <span class="keyword">check</span>(age <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">200</span>), <span class="comment">-- 检查约束</span></span><br><span class="line">    gender <span class="type">varchar</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">check</span>(gender <span class="keyword">in</span> (<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>),</span><br><span class="line">    IDCard <span class="type">varchar</span>(<span class="number">18</span>) <span class="keyword">unique</span>, <span class="comment">-- 唯一约束</span></span><br><span class="line">    class id <span class="type">int</span>, <span class="comment">-- 外键列</span></span><br><span class="line">    <span class="keyword">foreign</span> key (class_id) <span class="keyword">references</span> class(c_id) <span class="comment">-- 外键约束单独说明，引用主表主键</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> class (</span><br><span class="line">    c_id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">    c_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>查看表的所有信息（约束）：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure>

<p>为约束指定名称</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student (</span><br><span class="line">    id <span class="type">int</span>, </span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>, </span><br><span class="line">    age <span class="type">int</span>, </span><br><span class="line">    gender <span class="type">varchar</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span>, </span><br><span class="line">    IDCard <span class="type">varchar</span>(<span class="number">18</span>) <span class="keyword">unique</span>, </span><br><span class="line">    class id <span class="type">int</span>, </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">constraint</span> pk_id <span class="keyword">primary</span> key (id),</span><br><span class="line">    <span class="keyword">constraint</span> ck_age <span class="keyword">check</span>(age <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">200</span>),</span><br><span class="line">    <span class="keyword">constraint</span> ck_gender <span class="keyword">check</span>(gender <span class="keyword">in</span> (<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>)),</span><br><span class="line">    <span class="keyword">constraint</span> uq_IDCard <span class="keyword">unique</span>(IDCard),</span><br><span class="line">    <span class="keyword">constraint</span> fk_class_id <span class="keyword">foreign</span> key (class_id) <span class="keyword">references</span> class(c_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>非空约束只能在建表时在列名后面指定</strong></p>
<h4 id="方式2：在创建表之后再添加约束"><a href="#方式2：在创建表之后再添加约束" class="headerlink" title="方式2：在创建表之后再添加约束"></a>方式2：在创建表之后再添加约束</h4><p>为表添加约束，语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> <span class="keyword">constraint</span> 约束名 约束类型 约束内容</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">constraint</span> pk_id <span class="keyword">primary</span> key (id);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">constraint</span> ck_age <span class="keyword">check</span>(age <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">200</span>);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">constraint</span> ck_gender <span class="keyword">check</span>(gender <span class="keyword">in</span> (<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>));</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">constraint</span> uq_IDCard <span class="keyword">unique</span>(IDCard);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">constraint</span> fk_class_id <span class="keyword">foreign</span> key (class_id) <span class="keyword">references</span> class(c_id);</span><br></pre></td></tr></table></figure>

<p><strong>如果表中原有数据不符合新添加的约束，则无法添加</strong></p>
<h3 id="删除约束"><a href="#删除约束" class="headerlink" title="删除约束"></a>删除约束</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除主键约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">drop</span> <span class="keyword">primary</span> key; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除外键约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">drop</span> <span class="keyword">foreign</span> key 约束名称;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除唯一约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">drop</span> index 约束名称; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除非空约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student modify 列名 数据类型 <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除检查约束</span></span><br></pre></td></tr></table></figure>

<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul>
<li>创建表时，应先创建主表再创建从表；删除表时，应先删除从表，再删除主表</li>
<li>可以在创建表时指定级联删除，当主表数据被删除时，将自动删除从表中的相关数据</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student (</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key, </span><br><span class="line">    class_id <span class="type">int</span>, </span><br><span class="line">     <span class="keyword">foreign</span> key(class_id) <span class="keyword">references</span> class(c_id) <span class="keyword">on</span> <span class="keyword">delete</span> cascade <span class="comment">-- 级联删除</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="用户和权限管理"><a href="#用户和权限管理" class="headerlink" title="用户和权限管理"></a>用户和权限管理</h2><h3 id="创建用户并授予权限"><a href="#创建用户并授予权限" class="headerlink" title="创建用户并授予权限"></a>创建用户并授予权限</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> 权限列表 <span class="keyword">on</span> 库名.表名 <span class="keyword">to</span> 用户名@来源地址 identified <span class="keyword">by</span> <span class="string">&#x27;密码&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> test.EMP <span class="keyword">to</span> tom<span class="variable">@localhost</span> identified <span class="keyword">by</span> <span class="string">&#x27;password&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li>默认测试库可能不受权限管理控制</li>
<li>只有root管理员才具有创建用户的权限</li>
<li>可以在库名表名使用*表示所有库、表可用</li>
<li>可以在地址来源使用’%’来表示所有地址来源可用</li>
</ul>
<p>上述语法适用于MySQL5.6的版本</p>
<p>对比查看<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.6/en/grant.html">5.6</a>和<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/grant.html">8.0</a>两个版本的文档，在8.0版本中grant命令没法同时新增用户和为用户授权。</p>
<h3 id="查看权限"><a href="#查看权限" class="headerlink" title="查看权限"></a>查看权限</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> grants; <span class="comment">-- 可查看自己的权限</span></span><br><span class="line"><span class="keyword">show</span> grants <span class="keyword">for</span> 用户名@来源地址; <span class="comment">-- 查看其他人权限，仅root可用</span></span><br></pre></td></tr></table></figure>

<h3 id="撤销权限"><a href="#撤销权限" class="headerlink" title="撤销权限"></a>撤销权限</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">revoke</span> 权限列表 <span class="keyword">on</span> 库名.表名 用户名@来源地址;</span><br></pre></td></tr></table></figure>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> mysql.user </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;用户名&#x27;</span>;</span><br><span class="line"></span><br><span class="line">flush privileges; <span class="comment">-- 刷新权限</span></span><br></pre></td></tr></table></figure>

<h2 id="事务处理"><a href="#事务处理" class="headerlink" title="事务处理"></a>事务处理</h2><p>Transaction。事务处理是用来保证数据操作的完整性。</p>
<p>一个事务由若干个一次性的操作组成，这些操作不是都成功，就是都失败，如银行转账。</p>
<p>事务的特性ACID：</p>
<ul>
<li>原子性（Atomicity）：不可再分</li>
<li>一致性（Consistency）：要保证数据前后的一致性</li>
<li>隔离性（Isolation）：两个事务的操作互不干扰</li>
<li>持久性（Durability）：一旦事务提交，不可回滚</li>
</ul>
<h3 id="事务操作"><a href="#事务操作" class="headerlink" title="事务操作"></a>事务操作</h3><p>MySQL默认是自动提交事务的，将每一条语句都当做一个独立的事务执行，可以通过autocommit关闭自动提交事务。</p>
<ul>
<li>查看autocommit模式：show variables like ‘autocommit’;</li>
<li>设置autocommit模式：set autocommit&#x3D;on&#x2F;off;</li>
<li>手动提交事务：commit;</li>
<li>回滚未提交的事务：rollback;</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/%E7%AC%94%E8%AE%B0/%E5%85%B6%E4%BB%96/Git%E7%AC%94%E8%AE%B0/" rel="next" title="Git笔记">
      Git笔记 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">MySQL简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-number">2.</span> <span class="nav-text">基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5MySQL"><span class="nav-number">2.1.</span> <span class="nav-text">连接MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E8%A1%A8"><span class="nav-number">2.2.</span> <span class="nav-text">查看数据库和表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">2.3.</span> <span class="nav-text">导入数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL"><span class="nav-number">3.</span> <span class="nav-text">SQL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E6%93%8D%E4%BD%9C"><span class="nav-number">4.</span> <span class="nav-text">查找操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">4.1.</span> <span class="nav-text">简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95"><span class="nav-number">4.1.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%B3%95"><span class="nav-number">4.1.2.</span> <span class="nav-text">用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%99%90%E5%AE%9A%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.2.</span> <span class="nav-text">限定查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-1"><span class="nav-number">4.2.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%B3%95-1"><span class="nav-number">4.2.2.</span> <span class="nav-text">用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F"><span class="nav-number">4.3.</span> <span class="nav-text">排序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-2"><span class="nav-number">4.3.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%B3%95-2"><span class="nav-number">4.3.2.</span> <span class="nav-text">用法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.</span> <span class="nav-text">多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="nav-number">5.1.</span> <span class="nav-text">基本用法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-3"><span class="nav-number">5.1.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.1.2.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL99%E6%A0%87%E5%87%86"><span class="nav-number">5.2.</span> <span class="nav-text">SQL99标准</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="nav-number">5.2.1.</span> <span class="nav-text">内连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">5.2.2.</span> <span class="nav-text">外连接</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E5%92%8C%E5%88%86%E7%BB%84%E7%BB%9F%E8%AE%A1"><span class="nav-number">6.</span> <span class="nav-text">聚合函数和分组统计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-number">6.1.</span> <span class="nav-text">聚合函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E7%BB%9F%E8%AE%A1"><span class="nav-number">6.2.</span> <span class="nav-text">分组统计</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-4"><span class="nav-number">6.2.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="nav-number">6.2.2.</span> <span class="nav-text">示例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-1"><span class="nav-number">7.1.</span> <span class="nav-text">基本用法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-5"><span class="nav-number">7.1.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B-2"><span class="nav-number">7.1.2.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%88%86%E7%B1%BB"><span class="nav-number">7.2.</span> <span class="nav-text">子查询分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.2.1.</span> <span class="nav-text">单列子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.2.2.</span> <span class="nav-text">多行子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">7.2.3.</span> <span class="nav-text">多列子查询</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="nav-number">8.</span> <span class="nav-text">分页查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#limit%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">8.1.</span> <span class="nav-text">limit关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E9%A1%B5"><span class="nav-number">8.2.</span> <span class="nav-text">分页</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="nav-number">9.</span> <span class="nav-text">常用函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">9.1.</span> <span class="nav-text">字符串函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="nav-number">9.2.</span> <span class="nav-text">数值函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="nav-number">9.3.</span> <span class="nav-text">日期和时间函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="nav-number">9.4.</span> <span class="nav-text">流程控制函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E5%87%BD%E6%95%B0"><span class="nav-number">9.5.</span> <span class="nav-text">系统信息函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C"><span class="nav-number">10.</span> <span class="nav-text">更新操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#insert"><span class="nav-number">10.1.</span> <span class="nav-text">insert</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#delete"><span class="nav-number">10.2.</span> <span class="nav-text">delete</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#update"><span class="nav-number">10.3.</span> <span class="nav-text">update</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A8%E5%92%8C%E5%BA%93%E7%9A%84%E7%AE%A1%E7%90%86"><span class="nav-number">11.</span> <span class="nav-text">表和库的管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">11.1.</span> <span class="nav-text">数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="nav-number">11.2.</span> <span class="nav-text">创建表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="nav-number">11.3.</span> <span class="nav-text">修改表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="nav-number">11.4.</span> <span class="nav-text">删除表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%AA%E6%96%AD%E8%A1%A8"><span class="nav-number">11.5.</span> <span class="nav-text">截断表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%BA%93"><span class="nav-number">11.6.</span> <span class="nav-text">创建库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%BA%93"><span class="nav-number">11.7.</span> <span class="nav-text">删除库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F"><span class="nav-number">12.</span> <span class="nav-text">约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F%E5%88%86%E7%B1%BB"><span class="nav-number">12.1.</span> <span class="nav-text">约束分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F"><span class="nav-number">12.2.</span> <span class="nav-text">添加约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F1%EF%BC%9A%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F"><span class="nav-number">12.2.1.</span> <span class="nav-text">方式1：在创建表时添加约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F2%EF%BC%9A%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%A1%A8%E4%B9%8B%E5%90%8E%E5%86%8D%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F"><span class="nav-number">12.2.2.</span> <span class="nav-text">方式2：在创建表之后再添加约束</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%BA%A6%E6%9D%9F"><span class="nav-number">12.3.</span> <span class="nav-text">删除约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">12.4.</span> <span class="nav-text">注意事项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="nav-number">13.</span> <span class="nav-text">用户和权限管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%B9%B6%E6%8E%88%E4%BA%88%E6%9D%83%E9%99%90"><span class="nav-number">13.1.</span> <span class="nav-text">创建用户并授予权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%9D%83%E9%99%90"><span class="nav-number">13.2.</span> <span class="nav-text">查看权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%92%A4%E9%94%80%E6%9D%83%E9%99%90"><span class="nav-number">13.3.</span> <span class="nav-text">撤销权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="nav-number">13.4.</span> <span class="nav-text">删除用户</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86"><span class="nav-number">14.</span> <span class="nav-text">事务处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="nav-number">14.1.</span> <span class="nav-text">事务操作</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">MPasser</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">62</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://mpasser.github.io/note/" title="Home → https:&#x2F;&#x2F;mpasser.github.io&#x2F;note&#x2F;"><i class="fa fa-home fa-fw"></i>Home</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/21327295" title="Bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;21327295" rel="noopener" target="_blank"><i class="fa fa-tv fa-fw"></i>Bilibili</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/MPasser" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;MPasser" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">MPasser</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
